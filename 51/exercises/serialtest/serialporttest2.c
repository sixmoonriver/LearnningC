#include <reg52.h>
/* 
通过串口助手看到发送的数据不太对，不知道什么原因，有一次是对
*/

void main()
{
	int a = 0x87;
	SCON = 0x40; //设置串口模式3
	TMOD = 0x20; //设置定时器模式2，自动装载初值的定时器
	PCON = 0x80; //设置SMOD为1
	TL1 = 0xF4;  //设置定时器初值，波特率为4800
	TH1 = 0xF4;  //设置定时器初值
	ES = 0;  //禁用串口中断；
	TR1 = 1; //启用定时器
	SBUF = a; //将a写入发送缓冲区
	while(TI)
	{
		TI = 0; 
	}
}